Packages + smb.conf + krb5.conf + Updates

mv /etc/smb.conf /etc/samba/smb.conf.old
mv /etc/krb5.conf /etc/krb5.conf.old

mkdir -p /samba-4.20.0
cd ../../samba-4.20.0 # (I was in a home user folder)

wget https://download.samba.org/pub/samba/stable/samba-4.20.0.tar.gz
tar -zxf samba-4.20.0.tar.gz
cd samba-4.20.0

dnf install epel-release -y  # (installing Enterprise Repo's)
dnf update -y
dnf config-manager --set-enabled powertools # (on Rocky Linux Build 8.6)
dnf config-manager --set-enabled crb # (on Rocky Linux Build 9.3)
dnf repolist

Packages + Variables + Compile Parameters  

dnf -y install docbook-style-xsl bison flex gcc gdb gnutls-devel jansson-devel keyutils-libs-devel krb5-workstation libacl-devel libaio-devel libattr-devel libblkid-devel libtasn1 libtasn1-tools libxml2-devel libxslt openldap-devel pam-devel perl perl-ExtUtils-MakeMaker perl-Parse-Yapp popt-devel python3-cryptography python3-dns python3-gpg python36-devel readline-devel systemd-devel tar zlib-devel json perl-JSON lmdb-devel gpgme-devel libarchive-devel dbus-devel python3-markdown python3-pyasn1 rpcgen libtirpc-devel screen python3-devel krb5-devel --skip-broken 
find /usr -name "lmdb.h" (should show up) 
find /usr/include -name "rpc.h" (should show up) 
export CFLAGS="-I/path/to/lmdb -I/usr/include/tirpc $CFLAGS" (tested with and without) 
export CPPFLAGS="-I/path/to/lmdb -I/usr/include/tirpc $CPPFLAGS" (good practice to include them) 
dnf update -y 
./configure --enable-selftest \ --with-piddir=/usr/local/samba/var/run \ --with-privatedir=/usr/local/samba/private \ --with-sockets-dir=/usr/local/samba/var/run \ --with-lockdir=/usr/local/samba/var/locks \ --with-statedir=/usr/local/samba/var \ --with-cachedir=/usr/local/samba/var/cache 
make -j6 (6=core count)
make install 
ls /usr/local/samba/bin (should see lots of green entries) 
ls /usr/local/samba/sbin (should see one line of green entry) 
